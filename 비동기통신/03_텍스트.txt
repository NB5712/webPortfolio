
<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ajax(restAPI)-탭</title>
  <link rel="stylesheet" href="css/layout3.css">
</head>

<body>
  <div id="wrap">
    <header>
      <h1>도서 API</h1>
    </header>
    <section>
      <h2>추천 도서</h2>
      <ul id="booklist">
        <li><a href="#list_a" class="selected">문학/인문</a></li>
        <li><a href="#list_b">유아/아동</a></li>
        <li><a href="#list_c">경제/교양</a></li>
      </ul>
      <h3 id="titlelist"></h3>
      <article id="list_a">
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
      </article>

      <article id="list_b">
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
      </article>

      <article id="list_c">
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
      </article>
    </section>

    <footer>
      <p>Copyright ⓒ INTERPARK Corporation All rights reserved.</p>
    </footer>
  </div>
  <script src="js/jquery-3.1.1.min.js"></script>
  <script>
    function fetchBooks(query, containerSelector){
      $.ajax({
        method: "GET",
        url: "https://dapi.kakao.com/v3/search/book?target=title",
        data: { query: query, size: 50 },
        headers: { Authorization: "KakaoAK " },
      }).done(function (res) {
        const docs = res.documents;

        docs.forEach(function(i, idx){
          let str = i.contents;
          let str2 = str.substring(0, 60);

          $(`${containerSelector} >.box`)
            .eq(idx)
            .append(`
              <a href="sub.html">
                <img src="${i.thumbnail}">
                <h3>${i.title}</h3>
                <h4>${i.authors}</h4>
                <p><a href="sub.html">${str2}</a></p>
                <a href="#" class="btn">click</a>
              </a>
            `);
        });
      })
      .fail(function () {
      // 요청이 실패했을 때 실행
      console.error('실패');
      })
      .always(function () {
        // 성공이든 실패든 항상 실행
        console.log('AJAX 요청이 완료되었습니다.');
      });
    }

    // 함수 호출 예시
    fetchBooks("파리", "#list_a");
    fetchBooks("유아", "#list_b");
    fetchBooks("경제", "#list_c");

    $(function () {
      // 초기설정
      $('section article:not(' + $('#booklist li a.selected').attr('href') + ')').hide();
      $("#titlelist").text($('#booklist li a.selected').text());

      // multipage
      $('#booklist li a').click(function () {
        // title(추가)
        $("#titlelist").text( $(this).text() );
        // 메뉴
        $('#booklist li a').removeClass('selected');
        $(this).addClass('selected');
        // 내용
        $('section article').hide();
        $($(this).attr('href')).show();
        return false; 
      });
    });
  </script>
</body>
</html>


-----

@charset "utf-8";

/* reset */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: "맑은 고딕"; }
ul, ol, li { list-style: none; }
a { text-decoration: none; color: inherit; }

/* wrap */
#wrap { width: 1400px; margin: 20px auto; }
header { height: 150px; padding: 10px; }
section { padding: 10px; text-align: center; }
#booklist { font-size: 15px; overflow: hidden; display: inline-block; margin: 20px auto 50px; }
#booklist li { text-align: center; float: left; line-height: 45px; }
#booklist li a { display: block; padding: 5px 50px; border: 1px solid #ddd; }/* 기본 */
#booklist li a.selected { background-color: #ddd; }/* 선택 */
#booklist li a:hover { box-shadow: inset 0px 0px 2px #999; }
section article { display: flex; flex-wrap: wrap; width: 100%; }
.box { width: 300px; text-align: center; margin: 20px auto; padding: 15px 30px; border-radius: 4px; border: 1px solid #ddd; box-shadow: 4px 4px 4px #eee; }
.box h3 { color: #333; }
.box h3:hover { text-decoration: underline; }
.box h4 { font-weight: normal; font-size: 14px; margin-bottom: 20px; }
.box p { font-size: 12px; color: #666; text-align: left; }
.box p:hover { text-decoration: underline; }
.btn { margin-top: 20px; display: inline-block; padding: 2px 10px; border: solid 3px currentColor; border-radius: 6px; background-color: #a7a37e; color: #fff; font-size: 12px; }
.btn:hover { background-color: #333; }
footer { height: 80px; }
footer p { text-align: center; font-size: 11px; color: #666; margin: 30px 0 0 0px; }